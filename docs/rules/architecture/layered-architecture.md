# レイヤードアーキテクチャの原則

## 概要

アプリケーションは明確に分離されたレイヤーで構成し、各レイヤーは特定の責任を持つ。

## レイヤー構造

### 1. Controller Layer

- HTTP リクエスト/レスポンスの処理のみを担当
- ビジネスロジックを含まない
- Service Layer を呼び出してビジネス処理を実行
- 入力検証とレスポンスの整形のみ行う

### 2. Service Layer

- ビジネスロジックの実装
- トランザクション境界の管理
- 複数の Repository を組み合わせた処理
- ドメインロジックの実装

### 3. Repository Layer

- データアクセスの抽象化
- CRUD 操作の実装
- クエリメソッドの定義
- データベース固有の処理を隠蔽

### 4. Entity Layer

- データベーステーブルのマッピング
- ビジネスエンティティの表現
- 基本的な検証ロジックのみ含む

## 依存関係のルール

- Controller → Service → Repository → Entity
- 下位レイヤーは上位レイヤーを参照してはいけない
- 同一レイヤー間の直接参照は避ける